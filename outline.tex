\documentclass[11pt, a4paper, oneside, twocolumn, dvipdfmx]{jsarticle}
\usepackage{url}
\usepackage{graphicx}
\usepackage{geometry}
\geometry{top=1cm,  bottom=2cm, left=1.5cm, right=1.5cm}
\pagestyle{empty}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{enumitem}
\usepackage{tikz}
\usetikzlibrary{intersections,calc,arrows.meta}
\setlength{\intextsep}{10pt}
\setlength{\textfloatsep}{20pt}

\newcommand{\simname}{SimSym}
\newcommand{\simnamealt}{Simulation with Symbols}

\title{物理系を定義できるシミュレータ \simname の提案}

\author{東京工業大学 情報理工学院 数理・計算科学系\\18B04657 木内康介\\指導教員 増原英彦教授}

\date{}

\begin{document}
\maketitle

\section{はじめに} \label{intro}
高等学校における物理学の授業において、実験は重要である。Holubova~\cite{holubova_2019}は、実験室での作業は理論的な概念を検証する最も重要な方法であり、生徒は実験を通してどのような現象が起きるかを確認することができると述べている。

しかし実際は、生徒全員が実験を経験しているわけではない。力学分野において最も基本的な「運動の法則」に関する実験経験は、2014年の調査時点で60\%にしか満たない~\cite{2015KJ00010038066}。
理由としては、実験用の装置の準備や測定が難しいことや、実験を行うのに時間を要することが考えられる。

そこで実験の代替として近年利用されているのが、物理実験のシミュレータである。シミュレータを用いることで、実験と同様の学習効果を得ることができる~\cite{ajredini_real_2014}。

% しかし、実際に生徒が解く問題の解答過程と既存のシミュレータの間には、確認できる情報にギャップがある。高等学校で扱う物理の問題では図~\ref{symbol_based}のように方程式の計算を要求される。一方、例えばPhET~\cite{perkins_phet_2006} は、図~\ref{numeral_based}のように速度や質量、位置のような物理量を数値で与えることで指定された運動が描画される。そのため、可視化された運動がどのような方程式によるものなのか確認することができない。
しかし、既存のシミュレータでは不十分な点が存在する。図~\ref{symbol_based}は実際に生徒が解く問題の例である。このように、実際の問題では物理法則やそれを前提とした運動(物理系)は方程式によって表現される。一方、例えばPhET~\cite{perkins_phet_2006} では図~\ref{numeral_based}のように速度や質量、位置のような物理量を数値でしか確認できず、描画されている物理系がどのような方程式によって表現されているのかわからない。

\begin{figure}[b]
\noindent\rule{\linewidth}{0.4pt}

\small{\textbf{(問題)} 静止している質量 $m$ の物体に大きさ $F$ の力をかけ続ける。$t$ 秒後の速さを求めよ。}

\small{\textbf{(解答)} 物体の加速度を $a$ とする。運動方程式より $ma~=~F$ $\therefore~a~=~\dfrac{F}{m}$ 。等加速度運動の公式より $v~=~at~=~\dfrac{F}{m}t$\\
答え: $\dfrac{F}{m}t$}

\caption{方程式の計算例} \label{symbol_based}
\end{figure}

\begin{figure}[thb]
\centering
\includegraphics*[width=0.9\linewidth]{figure/PhET_example.png}
\caption{PhET のシミュレーション例} \label{numeral_based}
\end{figure}

そこで本研究では、物理系を定義できるシミュレータである \simname~(\simnamealt) を提案する。学習者は \simname で系内の物体をそのパラメータとともに定義し、その物体の運動を表す方程式を立式する。\simname は、次元の異なる物理量の和などの不正な方程式を警告するなど、学習者が正しい物理系を作成するための補助を行う。シミュレーションを実行すると、定義した物理系に基づいて数値計算がなされ、物体の運動が可視化される。

また、\simname には現実の運動を正しく表現した動作例が存在する。既存のシミュレータは作成者が物理系を全て定義し、学習者はパラメータを指定するだけである。一方 \simname では、学習者は動作例と比較しながら物理系を定義することで、現実の運動がどのような方程式で表されるものなのか理解できる。
% 既存のシミュレータは作成者が物理系を全て定義し、学習者はパラメータを指定するだけである。\simname を使い、学習者自身が動作例と比較しながら物理系を定義することで、現実の運動がどのような方程式で表されるものなのか理解することができる。

なお、\simname は大部分が未実装であるが、\ref{sec2}節で説明するアイデアは\ref{sec3}節に記す方針で実装が可能であると考えている。

\section{\simname の構成} \label{sec2}

\simname の画面は、図~\ref{simsym_fig1}のように左半分の物理系定義ペインと右半分の観測ペインに分かれている。

\subsection*{物理系定義ペイン}

学習者は、物理系定義ペインで以下の操作を行うことで、物理系を定義することができる:

\begin{enumerate}
\item \textbf{物体の作成}: 学習者が物体名を入力すると、\simname はその物体に紐付いた物理量に対応する次元付き変数($m_A\mathrm{[M]}, x_A\mathrm{[L]}$ など\footnote{$\mathrm{M}$: Mass(質量), $\mathrm{L}$: Length(長さ), $\mathrm{T}$: Time(長さ) などを次元と呼ぶ。例えば速度の次元は $\mathrm{[L/T]}$ と表される。})を生成する。
\item \textbf{方程式の立式}: 学習者は、1.で生成された変数を使って方程式を立式する。この際、次元付き変数は自由に追加することができる。なお、時刻を表す変数 $t\mathrm{[T]}$ や重力加速度 $g\mathrm{[L/T^2]}$ などの物理定数は用意されている。また、不正な次元の方程式は警告される。
\end{enumerate}

\subsection*{観測ペイン}

物理系の定義後、以下の操作を行うことで観測ペインに情報が描画される。

\begin{enumerate}[resume]
\item \textbf{観測対象の指定}: 学習者は観測したい物体とその物理量(位置・速度・加速度)を指定する。独自に追加した変数を追加で指定することもできる。
\item \textbf{初期値の入力}: 観測対象を指定した際に、その値を計算するために必要な変数が観測ペイン下部に表示される。これらに値を入力する。
\item \textbf{シミュレーションの再生}: シミュレーションを再生すると、時刻 $t$ が変化しながら各方程式が計算され、観測対象として指定した物理量が描画される。物体の位置は座標平面上の位置として、速度と加速度はベクトルとして描画される。
\item \textbf{動作例の選択(オプション)}: 学習者は現実の運動を正しく表現した動作例を選択することができる。動作例と学習者が定義した物理系の運動を比較することで、現実と同じ運動を表現しているか確認することができる。
\end{enumerate}

以下では具体例を見ていく。図~\ref{simsym_fig1}は、\simname 上で $x$ 軸方向の初速が $v_{0x}$, $y$ 軸方向の初速が $v_{0y}$, 重力加速度の大きさが $g$ であるような斜方投射を表現した例である。
\begin{enumerate}
\item 物体 A を作成し、初速 $v_{0x}$, $v_{0y}$ を紐付ける。
\item $v_{Ax}$, $v_{Ay}$, $x_A$, $y_A$ を用いて方程式を立式する。
\item 観測対象の物体として A を選択し、位置と速度を選ぶ。
\item $v_{Ax}$, $v_{Ay}$, $x_A$, $y_A$ を計算するのに必要な $g$, $v_{0x}$, $v_{0y}$ に値を入力する。
\item シミュレーションを再生すると、位置と速度が描画される。
\item 動作例として斜方投射を選択すると、観測ペーンに正しい軌道が破線で表示される。
\end{enumerate}

また、方程式の立式の際に $v_{0x} + t$ のように次元の一致していない式を定義しようとすると、図~\ref{wrongdim}のように警告される。さらに、$v_{Ay} = v_{0y} + gt$, $y_A = v_{0y}t + \dfrac{gt^2}{2}$ のように定義すると、図~\ref{wrongmove}の実線のような軌道を描いて運動するが、これは動作例の破線と大幅に異なる。そのため、これは現実の運動を正しく表せていないことがわかる。

\begin{figure}[htb]
  \centering
  \includegraphics*[width=\linewidth]{work/slide_img5-crop.png}
  \caption{\simname 上で斜方投射を表現した例} \label{simsym_fig1}
\end{figure}

\begin{figure}[htb]
\centering
\begin{minipage}{0.35\linewidth}
\includegraphics*[width=\linewidth]{work/slide_wrongdim.png}
\caption{誤った次元の定義例} \label{wrongdim}
\end{minipage}
\quad
\begin{minipage}{0.5\linewidth}
\includegraphics*[width=\linewidth]{work/slide_wrongmove.png}
\caption{誤った運動の定義例} \label{wrongmove}
\end{minipage}
\end{figure}

\section{実装の方針} \label{sec3}
フロントエンドに lively.next~\cite{ingalls_2008} を、方程式の処理と数値計算に SymPy~\cite{meurer_sympy_2017} を用い、JavaScript で実装する。lively.next は、GUIアプリケーションを作成・実行するためのWebプログラミング環境である。学習者が物体や方程式を定義する画面とシミュレーションを表示する画面を lively.next で作成する。SymPy は、記号計算のための Python ライブラリであり、Pyodide~\footnote{\url{https://pyodide.org/en/stable/}} を用いることで WebAssembly に変換し、ブラウザで実行する。\simname は、入力された物理量や方程式を SymPy オブジェクトに変換することで、数値計算を可能にする。シミュレーションは、時刻を表す変数 $t$ の範囲と粒度 $\Delta t$ を設定し、$t=0$ から $\Delta t$ ずつ変化させる。各方程式に各 $t$ を代入した結果を lively.next が受け取り、描画する。シミュレーションのリアルタイム性を確保するため、各 $t$ を方程式に代入した値は方程式の定義時・変数の値の変更時にあらかじめ計算する。

\section{まとめと課題}
本研究では、物理系を定義できるシミュレータ \simname を提案した。学習者は\simname を用いることで
自身が定義した物理系の運動と現実の運動との対応を視覚的に確認することができる。これにより、現実の運動がどのような方程式で表されるものなのかを理解することができる。

今後の課題は、\simname の教育効果の評価である。評価手法として、Hake~\cite{hake_1998}が導入した normalized gain を用いた実験を検討する。

\bibliographystyle{junsrt}
\tiny{\bibliography{thesis}}

\end{document}